This Learning Unit covers the following Learning Objectives:

1. Understand how to identify the version of a PostgreSQL database
2. Understand how to identify the current user of a PostgreSQL database
3. Understand how to identify the schemas within a PostgreSQL database
4. Understand how to identify the tables within a schema in a PostgreSQL database
5. Understand how to identify the column names and data types in a table in a PostgreSQL database

-------------
#### 7.4.1. PostgreSQL Specific Functions and Tables

We'll now focus on enumerating PostgreSQL databases, which use similar syntax to MySQL.
We can obtain the version of a PostgreSQL database with the _version()_ function.

```postgresql
user=# select version();
version
---------------------------------------------------------------------------
 PostgreSQL 13 on x86_64-pc-linux-musl, compiled by gcc (Alpine 10.3.1_git20210424) 10.3.1 20210424, 64-bit
(1 row)
```
Getting the version of a PostgreSQL database
![[Pasted image 20240815212011.png]]
We can obtain the user account currently connected to a PostgreSQL database by selecting _current_user_. We do not include parentheses in this case. The user account for the database will be returned, which does not necessarily correspond to an OS-level user.
```postgresql
user=# select current_user;
 current_user 
--------------
 user
(1 row)
```
Getting the user connected to a PostgreSQL database
![[Pasted image 20240815212125.png]]
PostgreSQL can segment tables into different databases, which are synonymous with schemas. PostgreSQL stores information about itself in several tables beginning with "pg_". We can query the _pg_database_ table for the names of the logical databases on the server.
```postgresql
user=# select datname from pg_database;
  datname  
-----------
 postgres
 user
 template1
 template0
 app
 exercise
 sqlmap
(7 rows)
```
Getting a list of databases or schemas
![[Pasted image 20240815212250.png]]
PostgreSQL databases also contain an _information_schema_ that can be queried for information about the database server. The _tables_ table includes a row for every table in the database, including the "pg_" tables. We can query for only user-created tables by including a WHERE clause with table_schema = 'public'.

```postgresql
app=# select table_name from app.information_schema.tables where table_schema = 'public';
 table_name 
------------
 menu
 users
 flags
(3 rows)
```
Getting a list of tables in a database or schema
![[Pasted image 20240815212425.png]]
Once we have identified the tables in a database, we'll next want to identify the column names for the tables we are interested in. The _columns_ table in the _information_schema_ contains information about the columns of all tables in the database. We can query this table to learn more about an unknown database.

```postgresql
app=# select column_name, data_type from app.information_schema.columns where table_name = 'menu';
 column_name |     data_type     
-------------+-------------------
 id          | integer
 price       | numeric
 name        | character varying
 description | character varying
(4 rows)
```
Getting a list of columns and their data type in a table in PostgreSQL
![[Pasted image 20240815212559.png]]

##### Labs
1. `13.4`
![[Pasted image 20240815212716.png]]
```postgresql
select version();
```

![[Pasted image 20240815212011.png]]

2. `OS{WhatIsYourClearanceLevel?}`
![[Pasted image 20240815213646.png]]
Identified a table named `flags` and `topsecret` in the exercises above - utilized this sql query to see the contents
```postgresql
select column_name, data_type from app.information_schema.columns where table_name = 'topsecret';
```
need to find way to extract data
![[Pasted image 20240815213010.png]]
used this postgresql query to get information for the `topsecret` table
```postgresql
select * from app.information_schema.columns where table_name = 'topsecret';
```
![[Pasted image 20240815213326.png]]
creating `postgressql` to query for the fields in thepicture above - remember its kind of like navigating a directory in linux
```postgresql
select flag from app.public.topsecret;
```

![[Pasted image 20240815213556.png]]