### System setup
```bash
sudo apt update
sudo apt install vlan net-tools -y
sudo modprobe 8021q
```
### Creating VLAN interface
```bash
# Create the tagged subinterface
sudo ip link add link eth0 name eth0.10 type vlan id 10

# Assign an IP address to the new VLAN interface
sudo ip addr add 192.168.10.10/24 dev eth0.10

# Bring it up
sudo ip link set dev eth0.10 up

# hHecking to make sure it is up
ip a
Device "eth0.10@eth0" does not exist.
Device "eth0.10@eth0" does not exist.
15: eth0.10@eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 00:0c:29:af:f3:43 brd ff:ff:ff:ff:ff:ff
    inet 192.168.10.10/24 scope global eth0.10
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:feaf:f343/64 scope link proto kernel_ll 
       valid_lft forever preferred_lft forever

```
### Generate `VLAN` traffic
```bash
ping -I eth0.10 192.168.10.10
```

```bash
sudo tcpdump -i eth0 -e vlan
```
and look for 
```bash
eth0 vlan 10, ethertype IPv4, ...
```

![[Pasted image 20250422164417.png]]
![[Pasted image 20250422175302.png]]
### Confirm Visibility
```bash
ip -d link show eth0.10
```
and clean up
```bash
sudo ip link set dev eth0.10 down
sudo ip link delete eth0.10
```

•This is a nice quick check, but could be unreliable depending on if tag stripping is enabled on a switch
•Might not be able to catch vlan tagged packets at the time collected


### Better pcap Method

![[Pasted image 20250423174428.png]]

![[Pasted image 20250423175457.png]]
•Can identify the 802.1Q VLAN header
•ID: 10 = VLAN10