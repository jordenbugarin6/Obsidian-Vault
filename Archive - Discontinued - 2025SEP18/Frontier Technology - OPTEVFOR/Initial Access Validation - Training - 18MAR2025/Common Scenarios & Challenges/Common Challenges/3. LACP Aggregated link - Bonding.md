`image` that can be used in powerpoint
![[Pasted image 20250422175330.png]]
2nd `image` thats a little worst
![[Pasted image 20250422200328.png]]
### Setup
setup `two` network `adapters` in the `vmware settings`that are both bridged
now my kali has two interfaces `eth1` and `eth0`
![[Pasted image 20250422175910.png]]
installing `bonding` support
```bash
sudo modprobe bonding
```
configure `/etc/network/interfaces`
```bash
sudo nano /etc/network/interfaces
```
`copy&paste` this in
```bash
auto bond0
iface bond0 inet static
    address 192.168.100.50
    netmask 255.255.255.0
    gateway 192.168.100.1
    bond-slaves eth0 eth1
    bond-mode 802.3ad
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200
    bond-lacp-rate fast

auto eth0
iface eth0 inet manual
    bond-master bond0

auto eth1
iface eth1 inet manual
    bond-master bond0

```
restart the networking
```bash
sudo ifdown eth0 eth1 bond0 && sudo ifup bond0
```
have to disable `network manager` for this to work
```bash
sudo systemctl disable NetworkManager
```
confirm that the `interfaces` exist
```bash
ip -brief link show

lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
eth0             UP             00:0c:29:b3:ea:f4 <BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP> 
eth0.10@eth0     UP             00:0c:29:b3:ea:f4 <BROADCAST,MULTICAST,UP,LOWER_UP> 
eth1             UP             00:0c:29:b3:ea:f4 <BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP> 
bond0            UP             00:0c:29:b3:ea:f4 <BROADCAST,MULTICAST,MASTER,UP,LOWER_UP> 

```
confirm `bonding is working`
If you see `MII Status: up` and both interfaces listed — you’re bonded. - Good To go
```bash
cat /proc/net/bonding/bond0                                                                                                                                                                                                               
Ethernet Channel Bonding Driver: v6.11.2-amd64                                                                                                                                              
Bonding Mode: IEEE 802.3ad Dynamic link aggregation                                                                                                                                         
Transmit Hash Policy: layer2 (0)                                                                                                                                                            
MII Status: up                                                                                                                                                                              
MII Polling Interval (ms): 100                                                                                                                                                              
Up Delay (ms): 200                                                                                                                                                                          
Down Delay (ms): 200                                                                                                                                                                        
Peer Notification Delay (ms): 0                                                                                                                                                             
802.3ad info                                                                                                                                                                                
LACP active: on                                                                                                                                                                             
LACP rate: fast                                                                                                                                                                             
Min links: 0                                                                                                                                                                                
Aggregator selection policy (ad_select): stable                                                                                                                                             
System priority: 65535                                                                                                                                                                      
System MAC address: 00:0c:29:b3:ea:f4                                                                                                                                                       
Active Aggregator Info:                                                                                                                                                                                                                       
        Aggregator ID: 1                                                                                                                                                                                                                      
        Number of ports: 1                                                                                                                                                                                                                    
        Actor Key: 9                                                                                                                                                                                                                          
        Partner Key: 1                                                                                                                                                                                                                        
        Partner Mac Address: 00:00:00:00:00:00                                                                                                                                                                                
Slave Interface: eth0                                                                                                                                                                       
MII Status: up
Speed: 1000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: 00:0c:29:b3:ea:f4
Slave queue ID: 0
Aggregator ID: 1
Actor Churn State: none
Partner Churn State: churned
Actor Churned Count: 0
Partner Churned Count: 1
details actor lacp pdu:
    system priority: 65535
    system mac address: 00:0c:29:b3:ea:f4
    port key: 9
    port priority: 255
    port number: 1
    port state: 207
details partner lacp pdu:
    system priority: 65535
    system mac address: 00:00:00:00:00:00
    oper key: 1
    port priority: 255
    port number: 1
    port state: 3

Slave Interface: eth1
MII Status: up
Speed: 1000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: 00:0c:29:b3:ea:fe
Slave queue ID: 0
Aggregator ID: 2
Actor Churn State: churned
Partner Churn State: churned
Actor Churned Count: 1
Partner Churned Count: 1
details actor lacp pdu:
    system priority: 65535
    system mac address: 00:0c:29:b3:ea:f4
    port key: 9
    port priority: 255
    port number: 2
    port state: 199
details partner lacp pdu:
    system priority: 65535
    system mac address: 00:00:00:00:00:00
    oper key: 1
    port priority: 255
    port number: 1
    port state: 3

```
### How To identify  an Aggregated Link as a Penetration Tester

When getting on a new `linux` machine check `/proc/net/bonding/*` to see if an `Aggregated Link` exists on a machine
- Here we are able to identify that `link aggregation` is active, as well as the `interfaces` that are apart of it
- If there is a file in `/proc/new/bonding/*` that means that an `aggregated link` exists.

![[Pasted image 20250422202224.png]]
make sure to look at the `ifconfig`
![[Pasted image 20250422181606.png]]
can also check if the `bonding` kernel module is loaded  with `lsmod | grep bonding`and if it is then an `aggregated link` could exist 
![[Pasted image 20250422202803.png]]

### Why this is important
- **You're doing passive recon or sniffing** (tcpdump, Wireshark, Responder, etc.)
- You think "I'm plugged in - I should see traffic on this VLAN or subnet"
- But if that port is part of an LACP bundle you are only seeing a slice of the traffic and might now be seeing the traffic flows you're looking for 
### Why This Is Especially Relevant:

- In **high-security environments**, LACP is used **on core systems** (DCs, firewalls, SANs, mail servers).
    
- These systems may have **segmented** or **mirrored** traffic across LACP interfaces.
    
- Missing their traffic = **missing critical findings** (auth flows, internal pivoting, data leaks, etc.).